{% comment %}
  Hero Banner v2
  - Desktop + Mobile background images
  - Clamped type sizes
  - Overlay control
  - Alignment + padding + max width
  - Primary CTA
{% endcomment %}

<section id="hero-{{ section.id }}" class="hbv2 {% if section.settings.align_h == 'center' %}is-center{% elsif section.settings.align_h == 'right' %}is-right{% else %}is-left{% endif %} {% if section.settings.align_v == 'bottom' %}is-bottom{% elsif section.settings.align_v == 'top' %}is-top{% else %}is-middle{% endif %}">
  <div class="hbv2__bg">
    {% if section.settings.image_desktop %}
      <div class="hbv2__bg--desk" role="img" aria-label="{{ section.settings.alt | escape }}"></div>
    {% endif %}
    {% if section.settings.image_mobile %}
      <div class="hbv2__bg--mob" role="img" aria-label="{{ section.settings.alt | escape }}"></div>
    {% endif %}
    <div class="hbv2__overlay" aria-hidden="true"></div>
  </div>

  <div class="hbv2__inner">
    <div class="hbv2__content">
        {% if section.settings.eyebrow != blank %}
        <div class="hbv2__eyebrow">{{ section.settings.eyebrow }}</div>
        {% endif %}

        {% if section.settings.heading != blank %}
        <h1 class="hbv2__heading">{{ section.settings.heading }}</h1>
        {% endif %}

        {% if section.settings.subheading != blank %}
        <div class="hbv2__sub">{{ section.settings.subheading }}</div>
        {% endif %}

        {% if section.settings.btn_label != blank and section.settings.btn_url != blank %}
        <a class="hbv2__btn" href="{{ section.settings.btn_url }}">{{ section.settings.btn_label }}</a>
        {% endif %}

        {% if section.settings.badge_left != blank or section.settings.badge_right != blank %}
            <div class="hbv2__ribbon">
                <div class="hbv2__ribbon-left">
                {% if section.settings.award_img_1 %}
                    <img class="hbv2__award" src="{{ section.settings.award_img_1 | image_url: width: 160 }}" alt="Award" loading="lazy">
                {% endif %}
                {% if section.settings.award_img_2 %}
                    <img class="hbv2__award" src="{{ section.settings.award_img_2 | image_url: width: 160 }}" alt="Award" loading="lazy">
                {% endif %}
                {% if section.settings.badge_left != blank %}
                    <div class="hbv2__ribbon-text">{{ section.settings.badge_left }}</div>
                {% endif %}
                </div>

                {% if section.settings.badge_right != blank %}
                <div class="hbv2__ribbon-right">
                    <!-- yellow check badge (SVG) -->
                    <svg class="hbv2__badge-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" aria-hidden="true" focusable="false">
                    <g clip-path="url(#clip0_401_2691)">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M10.586 2.1C10.94 1.74648 11.4136 1.53846 11.9134 1.51698C12.4132 1.49551 12.903 1.66214 13.286 1.984L13.414 2.101L15.314 4H18C18.5044 4.00009 18.9901 4.19077 19.3599 4.53384C19.7297 4.8769 19.9561 5.34702 19.994 5.85L20 6V8.686L21.9 10.586C22.2538 10.94 22.462 11.4139 22.4834 11.9139C22.5049 12.414 22.3381 12.9039 22.016 13.287L21.899 13.414L19.999 15.314V18C19.9991 18.5046 19.8086 18.9906 19.4655 19.3605C19.1224 19.7305 18.6521 19.9572 18.149 19.995L18 20H15.315L13.415 21.9C13.0609 22.2538 12.5871 22.462 12.087 22.4835C11.587 22.505 11.097 22.3382 10.714 22.016L10.587 21.9L8.68697 20H5.99997C5.49539 20.0002 5.0094 19.8096 4.63942 19.4665C4.26944 19.1234 4.04281 18.6532 4.00497 18.15L3.99997 18V15.314L2.09997 13.414C1.74616 13.06 1.53797 12.5861 1.51649 12.0861C1.49502 11.586 1.66182 11.0961 1.98397 10.713L2.09997 10.586L3.99997 8.686V6C4.00006 5.4956 4.19074 5.00986 4.53381 4.64009C4.87687 4.27032 5.34699 4.04383 5.84997 4.006L5.99997 4H8.68597L10.586 2.1ZM15.079 8.983L10.835 13.227L9.06697 11.459C8.87933 11.2715 8.62489 11.1662 8.35962 11.1663C8.09435 11.1664 7.83998 11.2719 7.65247 11.4595C7.46496 11.6471 7.35967 11.9016 7.35977 12.1669C7.35986 12.4321 7.46533 12.6865 7.65297 12.874L10.057 15.278C10.1591 15.3802 10.2804 15.4613 10.4139 15.5166C10.5474 15.5719 10.6905 15.6004 10.835 15.6004C10.9795 15.6004 11.1226 15.5719 11.256 15.5166C11.3895 15.4613 11.5108 15.3802 11.613 15.278L16.493 10.397C16.6751 10.2084 16.7759 9.9558 16.7736 9.6936C16.7714 9.4314 16.6662 9.18059 16.4808 8.99518C16.2954 8.80977 16.0446 8.70461 15.7824 8.70233C15.5202 8.70005 15.2676 8.80084 15.079 8.983Z"
                        fill="{{ section.settings.badge_icon_color }}" />
                    </g>
                    <defs><clipPath id="clip0_401_2691"><rect width="24" height="24" fill="white"/></clipPath></defs>
                    </svg>
                    <div class="hbv2__ribbon-text">{{ section.settings.badge_right }}</div>
                </div>
                {% endif %}
            </div>
        {% endif %}
    </div>
  </div>
</section>

<style>
  /* ---- Scope to this section ---- */
  #hero-{{ section.id }}{
    --pad-y: {{ section.settings.pad_y }}px;
    --pad-x: {{ section.settings.pad_x }}px;
    --maxw: {{ section.settings.max_width | default: 1400 }}px;
    --overlay: {{ section.settings.overlay | divided_by: 100.0 }};
    --txt: {{ section.settings.text_color }};
    --btn-bg: {{ section.settings.btn_bg }};
    --btn-txt: {{ section.settings.btn_txt }};
    color: var(--txt);
    position: relative;
    overflow: hidden;
    min-height: {{ section.settings.min_height }}px;
  }

  #hero-{{ section.id }} .hbv2__bg{
    position:absolute; inset:0; z-index:0;
  }
  #hero-{{ section.id }} .hbv2__bg--desk,
  #hero-{{ section.id }} .hbv2__bg--mob{
    position:absolute; inset:0;
    background-size: cover;
    background-position: center;
  }
  /* desktop image */
  {% if section.settings.image_desktop %}
  #hero-{{ section.id }} .hbv2__bg--desk{
    background-image: url('{{ section.settings.image_desktop | image_url: width: 2880 }}');
    display:block;
  }
  {% endif %}
  /* mobile image (only shown <= 768px if provided) */
  #hero-{{ section.id }} .hbv2__bg--mob{ display:none; }
  @media (max-width: 768px){
    {% if section.settings.image_mobile %}
    #hero-{{ section.id }} .hbv2__bg--desk{ display:none; }
    #hero-{{ section.id }} .hbv2__bg--mob{
      display:block;
      background-image: url('{{ section.settings.image_mobile | image_url: width: 1440 }}');
    }
    {% endif %}
  }

  #hero-{{ section.id }} .hbv2__overlay{
    position:absolute; inset:0;
    background: #000;
    opacity: var(--overlay);
  }

  #hero-{{ section.id }} .hbv2__inner{
    position: relative; z-index:1;
    display:grid;
    justify-items: start;
    padding: var(--pad-y) var(--pad-x);
  }

  #hero-{{ section.id }} .hbv2__content{
    width:100%;
    max-width: var(--maxw);
    margin: 0 auto;
    display:grid;
    gap: clamp(10px, 2vw, 22px);
  }

  /* Alignment controls */
  #hero-{{ section.id }}.is-center .hbv2__inner{ justify-items:center; text-align:center; }
  #hero-{{ section.id }}.is-right  .hbv2__inner{ justify-items:end;   text-align:right;  }
  #hero-{{ section.id }}.is-left   .hbv2__inner{ justify-items:start; text-align:left;   }

  #hero-{{ section.id }}.is-top .hbv2__inner{ align-content:start;  min-height:inherit; }
  #hero-{{ section.id }}.is-middle .hbv2__inner{ align-content:center; min-height:inherit; }
  #hero-{{ section.id }}.is-bottom .hbv2__inner{ align-content:end;   min-height:inherit; }

  /* Type */
  #hero-{{ section.id }} .hbv2__eyebrow{
    font-size: clamp(14px, 1.4vw, 20px);
    letter-spacing:.02em;
    opacity:.95;
  }
  #hero-{{ section.id }} .hbv2__heading{
    margin:0;
    font-family: var(--font-anton, var(--font-heading-family, var(--font-body-family)));
    font-weight: 700;
    line-height: 1.02;
    text-transform: uppercase;
    /*  clamp(32px, ~7vw, 96px) – tune as needed  */
    font-size: clamp(32px, 7vw, 96px);
    color: {{ section.settings.heading_color }};
  }
  #hero-{{ section.id }} .hbv2__sub{
    font-size: clamp(16px, 2.2vw, 24px);
    line-height: 1.5;
    max-width: 70ch;
  }

  /* CTA */
  #hero-{{ section.id }} .hbv2__btn{
    display:inline-block;
    background: var(--btn-bg);
    color: var(--btn-txt);
    border-radius: 14px;
    padding: clamp(10px, 1.2vw, 18px) clamp(16px, 2vw, 28px);
    font-weight: 800;
    text-decoration:none;
    white-space: nowrap;
    width: max-content;
    transition: transform .15s ease, opacity .15s ease;
  }
  #hero-{{ section.id }} .hbv2__btn:hover{ transform: translateY(-1px); opacity:.95; }

  /* Bottom badges (optional) */
  #hero-{{ section.id }} .hbv2__badges{
    display:flex; gap: clamp(10px, 2vw, 40px);
    flex-wrap: wrap;
    margin-top: clamp(6px, 1.2vw, 12px);
  }
  #hero-{{ section.id }} .hbv2__badge{
    font-size: clamp(12px, 1.4vw, 16px);
    letter-spacing:.02em;
    opacity:.95;
  }

  /* ---- Under-button ribbon ---- */
#hero-{{ section.id }} .hbv2__ribbon{
    display:flex;
    justify-content: space-between;
    align-items: center;
    gap: clamp(10px, 3vw, 32px);
    margin-top: clamp(10px, 2.2vw, 18px);
    flex-wrap: wrap;
}

#hero-{{ section.id }} .hbv2__ribbon-left,
#hero-{{ section.id }} .hbv2__ribbon-right{
    display:flex; align-items:center; gap: clamp(8px, 1.6vw, 16px);
}

#hero-{{ section.id }} .hbv2__award{
    height: clamp({{ section.settings.award_size | default: 28 }}px, 3.2vw, {{ section.settings.award_size | default: 28 | plus: 10 }}px);
    width: auto;
}

#hero-{{ section.id }} .hbv2__ribbon-text{
    font-size: clamp(12px, 1.6vw, 16px);
    letter-spacing: .02em;
    color: var(--txt);
    opacity: .95;
    white-space: nowrap;
}

#hero-{{ section.id }} .hbv2__badge-icon{
    min-width: 24px; min-height: 24px;
}

/* Stack on small screens */
@media (max-width: 640px){
    #hero-{{ section.id }} .hbv2__ribbon{
        flex-direction: column;
        align-items: flex-start;
    }
    #hero-{{ section.id }}.is-center .hbv2__ribbon{ align-items: center; }
    #hero-{{ section.id }}.is-right  .hbv2__ribbon{ align-items: flex-end; }
}

/* Mobile spacing tweaks */
@media (max-width: 768px){
    #hero-{{ section.id }}{ min-height: {{ section.settings.min_height_mobile }}px; }
}
</style>

{% schema %}
{
  "name": "Hero Banner v2",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "image_picker", "id": "image_desktop", "label": "Background image (desktop)" },
    { "type": "image_picker", "id": "image_mobile",  "label": "Background image (mobile)" },
    { "type": "text", "id": "alt", "label": "Background image alt", "default": "Hero background" },

    { "type": "range", "id": "overlay", "label": "Overlay darkness", "min": 0, "max": 90, "step": 5, "unit": "%", "default": 30 },

    { "type": "text", "id": "eyebrow", "label": "Eyebrow (small line)", "default": "Performance Wellness Bundle! LIMITED OFFER" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "YOUR PATH. YOUR BUNDLE. YOUR IMPACT." },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "For a limited time, save 40% on Mix & Match Wellness Bundles, and unlock 4 FREE bonus courses to help you coach the whole person." },

    { "type": "text", "id": "btn_label", "label": "Button label", "default": "Choose My Bundle" },
    { "type": "url",  "id": "btn_url",   "label": "Button link" },

    { "type": "text", "id": "badge_left",  "label": "Left badge",  "default": "CANADA’S TOP FITNESS TRAINER • ACCORDING TO IMPACT MAGAZINE" },
    { "type": "text", "id": "badge_right", "label": "Right badge", "default": "1.5 MILLION+ NASM CERTIFIED TRAINERS" },

    { "type": "select", "id": "align_h", "label": "Horizontal alignment", "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    { "type": "select", "id": "align_v", "label": "Vertical alignment", "default": "middle",
      "options": [
        { "value": "top", "label": "Top" },
        { "value": "middle", "label": "Middle" },
        { "value": "bottom", "label": "Bottom" }
      ]
    },

    { "type": "range", "id": "pad_y", "label": "Padding top/bottom", "min": 0, "max": 180, "step": 4, "unit": "px", "default": 80 },
    { "type": "range", "id": "pad_x", "label": "Padding left/right", "min": 0, "max": 120, "step": 4, "unit": "px", "default": 24 },
    { "type": "text",  "id": "max_width", "label": "Content max width (px)", "default": "1400" },

    { "type": "range", "id": "min_height", "label": "Min height desktop", "min": 300, "max": 1000, "step": 10, "unit": "px", "default": 640 },
    { "type": "range", "id": "min_height_mobile", "label": "Min height mobile", "min": 240, "max": 900, "step": 10, "unit": "px", "default": 480 },

    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#F0FF63" },
    { "type": "color", "id": "text_color", "label": "Body/eyebrow/badge color", "default": "#FFFFFF" },
    { "type": "color", "id": "btn_bg", "label": "Button background", "default": "#E9F24F" },
    { "type": "color", "id": "btn_txt", "label": "Button text", "default": "#0B0B0B" }
  ],
  "presets": [
    { "name": "Hero Banner v2" }
  ]
}
{% endschema %}
