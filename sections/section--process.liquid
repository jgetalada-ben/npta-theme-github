<style>
/* ===== Section frame ===== */
.section--process{
  background: {{ section.settings.background_color }};
  padding-block: 80px;
}
.section--process .section--process-container{ margin: 0 auto; }

/* Heading */
#{{ section.settings.section_id }} .section--title-block h2{
  margin: 0 0 28px;
  font-family: var(--font-anton);
  font-weight: 400;
  text-transform: uppercase;
  color: #FFFFFF;
  font-size: clamp(24px,4vw,40px);
}
#{{ section.settings.section_id }} .title-block--desc{
  color: #EDEDE6;
  max-width: 80ch;
}

/* ===== Grid ===== */
.process-steps{
  display: grid;
  grid-template-columns: 1fr;
  gap: clamp(28px,6vw,70px);
  align-items: start;
  overflow: hidden;
}

/* â‰¥ 1024px : three columns */
@media (min-width: 1024px){
  .process-steps{ grid-template-columns: repeat(3,1fr); }
}

/* ===== Step card ===== */
.step{
  position: relative;
  text-align: center;
  padding: clamp(10px,2.2vw,18px);
}

/* Arrow between columns (desktop only) */
@media (min-width: 1024px){
  .step.has-arrow::after{
    content:"";
    position:absolute;
    inset: 50% auto auto calc(100% + clamp(8px,1.2vw,14px));
    transform: translateY(-50%);
    width: clamp(26px, 3.2vw, 44px);
    aspect-ratio: 1.6 / 1;
    background: url('https://cdn.shopify.com/s/files/1/0617/9550/0074/files/arrow-icon-right.png?v=1762975403') no-repeat center / contain;
    pointer-events: none;
  }
}

/* ===== Step typography ===== */
#{{ section.settings.section_id }} .step-count{ margin-bottom: 10px; }
#{{ section.settings.section_id }} .step-count span{
  display:inline-block;
  font-family: var(--font-anton);
  font-weight: 400;
  letter-spacing: .02em;
  color: #F1EEDC;
  text-transform: uppercase;
  font-size: clamp(18px,3.2vw,28px);
}

#{{ section.settings.section_id }} .step-title{
  font-family: var(--font-adirek800);
  font-weight: 800;
  text-transform: uppercase;
  color: #FFFFFF;
  font-size: clamp(16px,2.6vw,26px);
  line-height: normal;
}

/* --- Link + animated underline (only when a link exists) --- */
#{{ section.settings.section_id }} .step-title.has-link a{
  {% comment %} color:#fff; {% endcomment %}
   color: inherit;
   outline: none;
  text-decoration:none;
  position:relative;
  display:inline-block;
}

/* underline grows from left to right on hover/focus */
#{{ section.settings.section_id }} .step-title.has-link a::after{
  content:"";
  position:absolute;
  width: 0%;
  bottom:-2px;
  height:2px;
  background: currentColor;
  transition: width 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
}
#{{ section.settings.section_id }} .step-title.has-link a:hover:before {
    background: #000;
    width: 40%;
    transition: width 0.5s 
    cubic-bezier(0.22, 0.61, 0.36, 1);
  }
{% comment %} #{{ section.settings.section_id }} .step-title.has-link a:hover::after,
#{{ section.settings.section_id }} .step-title.has-link a:focus-visible::after{
  transform: scaleX(1);
}
#{{ section.settings.section_id }} .step-title.has-link a:focus-visible{
  outline: 2px solid rgba(255,255,255,.35);
  outline-offset: 3px;
} {% endcomment %}
#{{ section.settings.section_id }} .step-title.has-link a::before{ left: 30%; }
#{{ section.settings.section_id }} .step-title.has-link a::after{ right: 30%; }
#{{ section.settings.section_id }} .step-title.has-link a:hover::before,
#{{ section.settings.section_id }} .step-title.has-link a:focus-visible::before{
  width: 40%;
}
/* on hover/focus: draw the line from center outward */
#{{ section.settings.section_id }} .step-title.has-link a:hover::before,
#{{ section.settings.section_id }} .step-title.has-link a:focus-visible::before{
  width: 40%;
  background: currentColor;
  transition: width 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
}

#{{ section.settings.section_id }} .step-title.has-link a:hover::after,
#{{ section.settings.section_id }} .step-title.has-link a:focus-visible::after{
  width: 40%;
  background: transparent; /* match multicolumn behavior */
  transition: 0s;
}

#{{ section.settings.section_id }} .step-desc{
  margin: 0;
  color: #FFFFFF;
  opacity: .95;
  font-family: var(--font-body-family);
  font-size: clamp(14px,1.6vw,18px);
  line-height: 1.45;
}

/* Tighten layout on small screens */
@media (max-width: 768px){
  .section--process{ padding-block: 48px; }
}
</style>

<section class="section--process" id="{{ section.settings.section_id }}" style="background-color: {{ section.settings.background_color }};">
  <div class="section--process-container page-container " style="max-width: {{ section.settings.container_width }}px;">

    <div class="section--title-block page-container" style="display: flex; justify-content: {{ section.settings.alignment }};">
      <div>
        <h2 style="text-align: {{ section.settings.title_alignment }};">{{ section.settings.section_title }}</h2>
        <div class="title-block--desc" style="text-align: {{ section.settings.title_alignment }};">{{ section.settings.section_description }}</div>
      </div>
    </div>
    
    <div class="process-steps">
      {% for block in section.blocks %}
        <div class="step {% unless forloop.last %}has-arrow{% endunless %}">
          <div class="step-count">
            <span>STEP {{ forloop.index }}</span>
          </div>

          <div class="step-title {% if block.settings.step_link != blank %}has-link{% endif %}">
            {% if block.settings.step_link != blank %}
              <a href="{{ block.settings.step_link }}"
                {% if block.settings.step_link_new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>
                {{ block.settings.step_title }}
              </a>
            {% else %}
              {{ block.settings.step_title }}
            {% endif %}
          </div>

          <p class="step-desc">{{ block.settings.step_description }}</p>
        </div>
      {% endfor %}
    </div>


  </div>

  {% if section.settings.show_program_button %}
    <div class="container--footer" style="display: flex; flex-wrap:wrap; justify-content: {{ section.settings.alignment }};"> 
      <div class="button-wrap" style="display: flex; justify-content: {{ section.settings.alignment }};">
        <a href="{{ section.settings.program_button_link }}" class="btn button-yg">
          <span class="btn-label-down">{{ section.settings.button_text }}</span>
          <span class="btn-label-down">{{ section.settings.button_text }}</span>
        </a>
      </div>
      <div class="section-footer-description rte-link" style="text-align: {{ section.settings.title_alignment }};">
        {{ section.settings.section_footer_description }} 
      </div>
    </div>
  {% endif %}
</section>

{% schema %}
{
  "name": "Progress Section",
  "settings": [
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "certified-trainers" },
    { "type": "text", "id": "section_title", "label": "Section Title", "default": "Lorem ipsum dolor sit amet" },
    { "type": "richtext", "id": "section_description", "label": "Section Description", "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>" },
    { "type": "select", "id": "title_alignment", "label": "Title Alignment",
      "options": [ { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" } ],
      "default": "left"
    },
    { "type": "range", "id": "container_width", "label": "Container width", "min": 200, "max": 2000, "step": 20, "unit": "px", "default": 980 },
    { "type": "select", "id": "alignment", "label": "Alignment",
      "options": [ { "value": "flex-start", "label": "Flex Start" }, { "value": "center", "label": "Center" }, { "value": "flex-end", "label": "Flex End" } ],
      "default": "center"
    },
    { "type": "checkbox", "id": "show_program_button", "label": "Display Program Button", "default": true },
    { "type": "text", "id": "button_text", "label": "Button Text", "default": "Button" },
    { "type": "url", "id": "program_button_link", "label": "Button Link", "default": "/" },
    { "type": "richtext", "id": "section_footer_description", "label": "Section Footer Description", "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>" }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        { "type": "text", "id": "step_title", "label": "Step Title", "default": "Lorem Ipsum" },
        { "type": "textarea", "id": "step_description", "label": "Step Description", "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt" },
        { "type": "url", "id": "step_link", "label": "Step Title Link (optional)" },
        { "type": "checkbox", "id": "step_link_new_tab", "label": "Open Step Link in new tab", "default": false }
      ]
    }
  ],
  "presets": [
    { "name": "Process Section", "category": "Custom Sections" }
  ]
}
{% endschema %}
