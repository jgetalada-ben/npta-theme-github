{% schema %}
{
  "name": "Top Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },

    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Lorem ipsum dolor sit amet"
    },
    {
      "type": "text",
      "id": "title_font_size",
      "label": "Title font-size (accepts clamp())",
      "default": "clamp(32px,6vw,64px)"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#FFFFFF"
    },

    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "text",
      "id": "subtitle_font_size",
      "label": "Subtitle font-size (accepts clamp())",
      "default": "clamp(20px,2.5vw,28px)"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle color",
      "default": "#FFFFFF"
    },

    {
      "type": "richtext",
      "id": "desc1",
      "label": "Description 1"
    },
    {
      "type": "text",
      "id": "desc_font_size",
      "label": "Description font-size (accepts clamp())",
      "default": "clamp(14px,1.4vw,18px)"
    },
    {
      "type": "color",
      "id": "desc_color",
      "label": "Description color",
      "default": "#FFFFFF"
    },

    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link (legacy)",
      "default": "/collections/all"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text (legacy)",
      "default": "GET CERTIFIED"
    },

    {
      "type": "checkbox",
      "id": "show_button_1",
      "label": "Show Button 1",
      "default": true
    },
    {
      "type": "text",
      "id": "button_1_text",
      "label": "Button 1 Text",
      "default": "SPEAK TO ADVISOR"
    },
    {
      "type": "url",
      "id": "button_1_link",
      "label": "Button 1 Link",
      "default": "/"
    },
    {
      "type": "color",
      "id": "button_1_bg",
      "label": "Button 1 background",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "button_1_text_color",
      "label": "Button 1 text color",
      "default": "#01241E"
    },

    {
      "type": "checkbox",
      "id": "show_button_2",
      "label": "Show Button 2",
      "default": true
    },
    {
      "type": "text",
      "id": "button_2_text",
      "label": "Button 2 Text",
      "default": "BOOK A CALL"
    },
    {
      "type": "url",
      "id": "button_2_link",
      "label": "Button 2 Link",
      "default": "/"
    },
    {
      "type": "color",
      "id": "button_2_bg",
      "label": "Button 2 background",
      "default": "#C8FF63"
    },
    {
      "type": "color",
      "id": "button_2_text_color",
      "label": "Button 2 text color",
      "default": "#01241E"
    },

    {
      "type": "text",
      "id": "button_font_size",
      "label": "Button font-size (accepts clamp())",
      "default": "clamp(13px,1.2vw,16px)"
    },
    {
      "type": "text",
      "id": "button_gap",
      "label": "Gap between buttons (accepts clamp())",
      "default": "clamp(12px,2vw,32px)"
    },

    {
      "type": "select",
      "id": "button_position",
      "label": "Button Position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },

    {
      "type": "select",
      "id": "title_alignment",
      "label": "Title Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },

    {
      "type": "range",
      "id": "container_width",
      "label": "Container width",
      "min": 200,
      "max": 2000,
      "step": 20,
      "unit": "px",
      "default": 980
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Block Alignment",
      "options": [
        { "value": "flex-start", "label": "Flex Start" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Flex End" }
      ],
      "default": "center"
    },

    {
      "type": "text",
      "id": "banner_height",
      "label": "Banner height",
      "info": "Enter a value like 480px or 70vh. Leave blank to use the default banner height.",
      "placeholder": "e.g. 480px or 70vh"
    },
    {
      "type": "select",
      "id": "top_banner_align_items",
      "label": "Top banner align-items (applies only when height is set)",
      "options": [
        { "value": "flex-start", "label": "Flex Start" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Flex End" }
      ],
      "default": "center"
    },
    {
      "type": "checkbox",
      "id": "show_banner_gradient",
      "label": "Show background gradient overlay",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Top Banner",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{%- comment -%}
Optional global title block (kept from original)
{%- endcomment -%}
<div class="section--title-block " style="display: flex; justify-content: {{ section.settings.alignment }};">
  <div style="max-width: {{ section.settings.container_width }}px;">
    <h2 style="text-align: {{ section.settings.title_alignment }};">{{ section.settings.section_title }}</h2>
    <div style="text-align: {{ section.settings.title_alignment }};">{{ section.settings.section_description }}</div>
  </div>
</div>

{%- comment -%}
Build style string for section (CSS variables + optional height)
{%- endcomment -%}
{%- capture banner_style -%}
  --title-size: {{ section.settings.title_font_size | default: 'clamp(32px,6vw,64px)' }};
  --subtitle-size: {{ section.settings.subtitle_font_size | default: 'clamp(20px,2.5vw,28px)' }};
  --desc-size: {{ section.settings.desc_font_size | default: 'clamp(14px,1.4vw,18px)' }};
  --title-color: {{ section.settings.title_color | default: '#FFFFFF' }};
  --subtitle-color: {{ section.settings.subtitle_color | default: '#FFFFFF' }};
  --desc-color: {{ section.settings.desc_color | default: '#FFFFFF' }};
  --btn1-bg: {{ section.settings.button_1_bg | default: '#FFFFFF' }};
  --btn1-color: {{ section.settings.button_1_text_color | default: '#01241E' }};
  --btn2-bg: {{ section.settings.button_2_bg | default: '#C8FF63' }};
  --btn2-color: {{ section.settings.button_2_text_color | default: '#01241E' }};
  --btn-font-size: {{ section.settings.button_font_size | default: 'clamp(13px,1.2vw,16px)' }};
  {%- if section.settings.banner_height != blank -%}
    height: {{ section.settings.banner_height }};
    display:flex;
    flex-direction:row;
    align-items: {{ section.settings.top_banner_align_items }};
  {%- endif -%}
{%- endcapture -%}

<section
  class="section--top-banner {% if section.settings.show_banner_gradient %}has-gradient{% endif %}"
  style="{{ banner_style | strip }}"
>
  <div class="section--top-banner-container">
    <div class="top-banner--text-content" style="display: flex; justify-content: {{ section.settings.alignment }};">
      <div class="top-banner--text-content-container" style="max-width: {{ section.settings.container_width }}px; text-align: {{ section.settings.title_alignment }};">

        <h1>{{ section.settings.title }}</h1>

        {% if section.settings.subtitle != blank %}
          <p class="subtitle-p">{{ section.settings.subtitle }}</p>
        {% endif %}

        {% if section.settings.desc1 != blank %}
          <p class="top-banner-desc">{{ section.settings.desc1 }}</p>
        {% endif %}

        {%- assign has_both_buttons = false -%}
        {%- if section.settings.show_button_1 and section.settings.show_button_2 -%}
          {%- assign has_both_buttons = true -%}
        {%- endif -%}

        <div
          class="button-wrapper"
          style="justify-content: {{ section.settings.button_position }}; --btn-gap: {% if has_both_buttons %}{{ section.settings.button_gap | default: 'clamp(12px,2vw,32px)' }}{% else %}0px{% endif %};"
        >
          {% if section.settings.show_button_1 %}
            <a href="{{ section.settings.button_1_link }}" target="_blank" class="btn button-yg btn-1">
              <span class="btn-label-down">{{ section.settings.button_1_text }}</span>
              <span class="btn-label-down">{{ section.settings.button_1_text }}</span>
            </a>
          {% endif %}

          {% if section.settings.show_button_2 %}
            <a href="{{ section.settings.button_2_link }}" target="_blank" class="btn button-b btn-2">
              <span class="btn-label-down">{{ section.settings.button_2_text }}</span>
              <span class="btn-label-down">{{ section.settings.button_2_text }}</span>
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="section--top-background" style="background-image: url({{ section.settings.background_image | img_url: 'master' }});"></div>
</section>

<style>
.section--top-background{
  background-size: cover;
  background-position: right;
  background-repeat: no-repeat;
  height: 100%;
  position: absolute;
  right: 0;
  top: 0;
  width: 50%;
}

@media (max-width: 768px) {
  .section--top-background{
    background-position: center;
    width: 100%;
    opacity: 0.4;
  }
}

.section--top-banner{
  background-color: #133257;
  color: #fff;
  text-align: left;
  position: relative;
  padding: 90px 0;
}

.section--top-banner.has-gradient:before {
  content: "";
  position: absolute;
  background: linear-gradient(90deg, #133257 1%, rgba(19, 50, 87, 0.9) 7.34%, rgba(19, 50, 87, 0.50) 15%, rgba(19, 50, 87, 0.00) 50%);
  width: 49%;
  height: 100%;
  top: 0;
  bottom: 0;
  left: auto;
  right: 1%;
  z-index: 1;
  background-fit: cover;
}

.section--top-banner .section--top-banner-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1989px;
  width: 90%;
  margin: 0 auto;
  z-index: 2;
  position: relative;
}

.top-banner--text-content {
  width: 100%;
}

/* Heading */
.section--top-banner .top-banner--text-content h1 {
  font-family: var(--font-anton);
  font-size: var(--title-size, clamp(32px,6vw,64px));
  font-weight: 400;
  line-height: 1.2;
  margin-bottom: clamp(20px,5vw,50px);
  text-transform: none;
  color: var(--title-color, #ffffff);
}

/* Subtitle */
.subtitle-p {
  font-size: var(--subtitle-size, 26px);
  color: var(--subtitle-color, #ffffff);
  margin-bottom: 18px;
}

/* Description */
.top-banner-desc {
  color: var(--desc-color, #ffffff);
  font-family: var(--font-poppins500, var(--font-body-family));
  font-size: var(--desc-size, 16px);
  font-style: normal;
  font-weight: 500;
  line-height: 150%;
  margin-bottom: 40px;
}

/* Ensure any other <p> under the banner (not subtitle) follows desc styles */
.section--top-banner .top-banner--text-content p:not(.subtitle-p) {
  color: var(--desc-color, #ffffff);
  font-size: var(--desc-size, 16px);
}

/* Buttons */
.button-wrapper {
  display: flex;
  flex-wrap: wrap;
  gap: var(--btn-gap, 24px);
}

.section--top-banner .top-banner--text-content .button-wrapper .btn {
  border-radius: 10px;
}

.section--top-banner .top-banner--text-content .button-wrapper .btn .btn-label-down {
  font-family: var(--font-adirek800);
  font-weight: 800;
  font-size: var(--btn-font-size, 14px);
  text-decoration: none;
}

/* Button 1 styling via CSS vars */
.section--top-banner .top-banner--text-content .button-wrapper .btn.btn-1 {
  background-color: var(--btn1-bg, #ffffff);
  border-color: var(--btn1-bg, #ffffff);
}
.section--top-banner .top-banner--text-content .button-wrapper .btn.btn-1 .btn-label-down {
  color: var(--btn1-color, #01241E);
}

/* Button 2 styling via CSS vars */
.section--top-banner .top-banner--text-content .button-wrapper .btn.btn-2 {
  background-color: var(--btn2-bg, #C8FF63);
  border-color: var(--btn2-bg, #C8FF63);
}
.section--top-banner .top-banner--text-content .button-wrapper .btn.btn-2 .btn-label-down {
  color: var(--btn2-color, #01241E);
}

@media (max-width: 990px) {
  .section--top-banner {
    padding: 60px 0;
  }
  .section--top-banner .top-banner--text-content .button-wrapper .btn {
    width: auto;
  }
}
</style>
